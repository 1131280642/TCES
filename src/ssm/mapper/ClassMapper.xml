<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ssm.dao.ClassDao">
	
	
	<!-- 1.获取班级信息列表，展示 -->
	<select id="getClasses" resultMap="classess">
		select classes.*,department.dep_name from classes,department where classes.dep_id=department.id;
	</select>
	
	<resultMap type="ssm.entity.Classes" id="classess">
		<id property="id" column="id" />
		<result property="classes_no" column="classes_no" />
		<association property="department" javaType="ssm.entity.Department">
			<id property="id" column="id" />
			<result property="dep_name" column="dep_name" />
		</association>
	</resultMap>
	
	<!-- 2.获取院系信息，展示 -->
	<select id="getDepartment" resultType="ssm.entity.Department">
		select * from department;
	</select>
	
	<!-- 3.查询添加的班级是否已经存在（通过班级号查询） -->
	<select id="selectClassesByClassNo" parameterType="String" resultType="int">
		select count(1) from classes where classes_no=#{classes_no};
	</select>
	
	<!-- 4.添加班级信息 -->
	<insert id="addClasses" parameterType="ssm.entity.Classes" >
		insert into classes(dep_id,classes_no) values(#{dep_id},#{classes_no});
	</insert>
</mapper>